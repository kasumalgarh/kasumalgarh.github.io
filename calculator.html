<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gajsa Ultimate All-in-One</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #d35400; /* Marwari Orange */
            --bg: #eceff1;
            --card-bg: #ffffff;
            --text: #333;
            --border-radius: 12px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            margin: 0; padding: 15px; color: var(--text);
        }

        .container { max-width: 1100px; margin: 0 auto; }

        /* Header */
        header {
            background-color: var(--primary); color: white;
            padding: 15px 20px; border-radius: var(--border-radius);
            margin-bottom: 20px; display: flex; flex-wrap: wrap;
            justify-content: space-between; align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .settings-box {
            background: rgba(255,255,255,0.15); padding: 8px 15px;
            border-radius: 6px; display: flex; align-items: center; gap: 10px;
        }
        .settings-box input { width: 50px; padding: 5px; text-align: center; font-weight: bold; border: none; border-radius: 4px; }

        /* Grid System */
        .dashboard-grid { display: grid; grid-template-columns: 1fr 1.1fr; gap: 20px; }
        .row-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        
        @media (max-width: 768px) { 
            .dashboard-grid, .row-grid { grid-template-columns: 1fr; } 
        }

        /* Cards */
        .card {
            background: var(--card-bg); border-radius: var(--border-radius);
            padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px; border-top: 4px solid var(--accent);
        }
        .card h3 { margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; color: var(--primary); font-size: 1.1rem; }

        /* --- 1. Simple Calculator Styles --- */
        .calc-screen {
            width: 100%; height: 50px; background: #222; color: #0f0;
            font-size: 1.5rem; text-align: right; padding: 10px;
            border-radius: 6px; margin-bottom: 10px; box-sizing: border-box; font-family: monospace;
        }
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .calc-btn {
            padding: 12px; font-size: 1.1rem; border: none; border-radius: 6px;
            cursor: pointer; background: #f0f0f0; transition: 0.2s;
        }
        .calc-btn:hover { background: #ddd; }
        .calc-btn.op { background: var(--primary); color: white; }
        .calc-btn.eq { background: var(--accent); color: white; grid-column: span 2; }
        .calc-btn.clr { background: #c0392b; color: white; }

        /* --- 2. Land Calculator Inputs --- */
        label { display: block; margin: 8px 0 4px; font-weight: 600; font-size: 0.85rem; color: #555; }
        input[type="number"], select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        
        .toggle-container { display: flex; gap: 10px; margin-bottom: 15px; background: #f5f5f5; padding: 5px; border-radius: 8px; }
        .toggle-btn { flex: 1; padding: 8px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; background: transparent; color: #666; }
        .toggle-btn.active { background: var(--primary); color: white; }

        .jarib-row { display: flex; gap: 5px; } 
        .jarib-row div { flex: 1; }

        .btn-action { width: 100%; padding: 12px; background: var(--accent); color: white; border: none; border-radius: 6px; margin-top: 15px; cursor: pointer; font-size: 1rem; font-weight: bold; }
        .btn-action:hover { background-color: #bf4600; }

        /* Results Table */
        .result-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .result-table th { text-align: left; color: #777; width: 40%; padding: 8px; border-bottom: 1px solid #eee; }
        .result-table td { text-align: right; font-weight: bold; color: var(--primary); padding: 8px; border-bottom: 1px solid #eee; }
        .highlight td { color: var(--accent); font-size: 1.1rem; background: #fff8e1; }

        /* History */
        .history-list { max-height: 200px; overflow-y: auto; padding: 0; list-style: none; }
        .history-item { padding: 10px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; font-size: 0.9rem; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    
    <header>
        <div>
            <h1 style="margin:0; font-size:1.5rem;">Gajsa Land Tool</h1>
            <p style="margin:5px 0 0; font-size:0.8rem;">1 Bigha = 17,424 SqFt | 20 Biswa</p>
        </div>
        <div class="settings-box">
            <span style="color:#fff;">üõ†Ô∏è ‡§ó‡§ú:</span>
            <input type="number" id="gajSize" value="2" oninput="updateSettings()">
            <span style="color:#fff;">x</span>
            <input type="number" id="gajSizeDisp" value="2" disabled style="background:#ddd;">
            <small style="color:#eee;">(= <span id="currentSqFt">4</span> sqft)</small>
        </div>
    </header>

    <div class="dashboard-grid">
        
        <div class="left-col">
            
            <div class="card">
                <h3>üî¢ ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞</h3>
                <input type="text" class="calc-screen" id="calcScreen" readonly placeholder="0">
                <div class="calc-grid">
                    <button class="calc-btn clr" onclick="calcClear()">C</button>
                    <button class="calc-btn op" onclick="calcAppend('/')">√∑</button>
                    <button class="calc-btn op" onclick="calcAppend('*')">√ó</button>
                    <button class="calc-btn clr" onclick="calcBackspace()">‚å´</button>
                    <button class="calc-btn" onclick="calcAppend('7')">7</button>
                    <button class="calc-btn" onclick="calcAppend('8')">8</button>
                    <button class="calc-btn" onclick="calcAppend('9')">9</button>
                    <button class="calc-btn op" onclick="calcAppend('-')">-</button>
                    <button class="calc-btn" onclick="calcAppend('4')">4</button>
                    <button class="calc-btn" onclick="calcAppend('5')">5</button>
                    <button class="calc-btn" onclick="calcAppend('6')">6</button>
                    <button class="calc-btn op" onclick="calcAppend('+')">+</button>
                    <button class="calc-btn" onclick="calcAppend('1')">1</button>
                    <button class="calc-btn" onclick="calcAppend('2')">2</button>
                    <button class="calc-btn" onclick="calcAppend('3')">3</button>
                    <button class="calc-btn op" onclick="calcAppend('.')">.</button>
                    <button class="calc-btn" onclick="calcAppend('0')">0</button>
                    <button class="calc-btn" onclick="calcAppend('00')">00</button>
                    <button class="calc-btn eq" onclick="calcEqual()">=</button>
                </div>
            </div>

            <div class="card">
                <h3>üîÑ ‡§Ø‡•Ç‡§®‡§ø‡§ü ‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü‡§∞ (‡§¨‡•Ä‡§ò‡§æ/‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞)</h3>
                <div style="display:flex; gap:10px;">
                    <div style="flex:1"><input type="number" id="convVal" placeholder="‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ" oninput="convertLand()"></div>
                    <div style="flex:1">
                        <select id="convUnit" onchange="convertLand()">
                            <option value="bigha">‡§¨‡•Ä‡§ò‡§æ</option>
                            <option value="hectare">‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞</option>
                            <option value="biswa">‡§¨‡§ø‡§∏‡•ç‡§µ‡§æ</option>
                            <option value="gaj">‡§ó‡§ú</option>
                            <option value="sqft">Sq Ft</option>
                        </select>
                    </div>
                </div>
                <table class="result-table">
                    <tr class="highlight"><th>‡§¨‡•Ä‡§ò‡§æ</th><td id="c_bigha">-</td></tr>
                    <tr><th>‡§¨‡§ø‡§∏‡•ç‡§µ‡§æ</th><td id="c_biswa">-</td></tr>
                    <tr><th>‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞</th><td id="c_hec">-</td></tr>
                    <tr><th>‡§ó‡§ú (Local)</th><td id="c_gaj">-</td></tr>
                    <tr><th>Sq. Ft.</th><td id="c_sqft">-</td></tr>
                </table>
            </div>
        </div>

        <div class="right-col">
            <div class="card" style="border-top-color: #27ae60;">
                <h3>üìê ‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ (Area)</h3>
                
                <div class="toggle-container">
                    <button class="toggle-btn active" id="btnModeSimple" onclick="setMode('simple')">‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ (‡§´‡•Å‡§ü/‡§ó‡§ú)</button>
                    <button class="toggle-btn" id="btnModeJarib" onclick="setMode('jarib')">‡§ú‡§æ‡§∞‡•Ä‡§¨ (Jarib)</button>
                </div>

                <div id="modeSimple">
                    <div style="display:flex; gap:10px;">
                        <div style="flex:1"><label>‡§≤‡§Ç‡§¨‡§æ‡§à</label><input type="number" id="s_len"></div>
                        <div style="flex:1"><label>‡§ö‡•å‡§°‡§º‡§æ‡§à</label><input type="number" id="s_wid"></div>
                    </div>
                    <label>‡§Ø‡•Ç‡§®‡§ø‡§ü</label>
                    <select id="s_unit">
                        <option value="ft">‡§´‡•Å‡§ü (Feet)</option>
                        <option value="gaj">‡§ó‡§ú (Gaj)</option>
                        <option value="mtr">‡§Æ‡•Ä‡§ü‡§∞ (Meter)</option>
                    </select>
                </div>

                <div id="modeJarib" class="hidden">
                    <label>‡§≤‡§Ç‡§¨‡§æ‡§à (L)</label>
                    <div class="jarib-row">
                        <div><input type="number" id="l_j" placeholder="‡§ú‡§æ‡§∞‡•Ä‡§¨"></div>
                        <div><input type="number" id="l_g" placeholder="‡§ó‡§æ‡§Å‡§†"></div>
                        <div><input type="number" id="l_a" placeholder="‡§Ö‡§Ç‡§ó‡•Ç‡§∞"></div>
                    </div>
                    <label>‡§ö‡•å‡§°‡§º‡§æ‡§à (W)</label>
                    <div class="jarib-row">
                        <div><input type="number" id="w_j" placeholder="‡§ú‡§æ‡§∞‡•Ä‡§¨"></div>
                        <div><input type="number" id="w_g" placeholder="‡§ó‡§æ‡§Å‡§†"></div>
                        <div><input type="number" id="w_a" placeholder="‡§Ö‡§Ç‡§ó‡•Ç‡§∞"></div>
                    </div>
                </div>

                <button class="btn-action" onclick="calculateArea()">‡§π‡§ø‡§∏‡§æ‡§¨ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>

                <div id="areaResult" class="hidden" style="margin-top:20px; background:#f9f9f9; padding:10px; border-radius:8px;">
                    <table class="result-table">
                        <tr class="highlight"><th>‡§ï‡•Å‡§≤ ‡§¨‡•Ä‡§ò‡§æ</th><td id="res_bigha">0</td></tr>
                        <tr><th>‡§ï‡•Å‡§≤ ‡§¨‡§ø‡§∏‡•ç‡§µ‡§æ</th><td id="res_biswa">0</td></tr>
                        <tr><th>‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞</th><td id="res_hec">0</td></tr>
                        <tr><th>‡§ï‡•Å‡§≤ ‡§ó‡§ú</th><td id="res_gaj">0</td></tr>
                        <tr><th>Sq. Ft.</th><td id="res_sqft">0</td></tr>
                    </table>
                    <button style="width:100%; padding:8px; margin-top:10px; background:#333; color:white; border:none; border-radius:4px; cursor:pointer;" onclick="saveHistory()">üíæ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
                </div>
            </div>
        </div>
    </div>

    <div class="row-grid">
        
        <div class="card">
            <h3>üöú ‡§Ü‡§°‡§æ-‡§ü‡•á‡•ù‡§æ ‡§ñ‡•á‡§§ (‡§î‡§∏‡§§)</h3>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                <input type="number" id="irr_e" placeholder="‡§™‡•Ç‡§∞‡•ç‡§µ ‡§≠‡•Å‡§ú‡§æ">
                <input type="number" id="irr_w" placeholder="‡§™‡§∂‡•ç‡§ö‡§ø‡§Æ ‡§≠‡•Å‡§ú‡§æ">
                <input type="number" id="irr_n" placeholder="‡§â‡§§‡•ç‡§§‡§∞ ‡§≠‡•Å‡§ú‡§æ">
                <input type="number" id="irr_s" placeholder="‡§¶‡§ï‡•ç‡§∑‡§ø‡§£ ‡§≠‡•Å‡§ú‡§æ">
            </div>
            <button class="btn-action" style="background:#8e44ad;" onclick="calcIrregular()">‡§î‡§∏‡§§ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>
            <div id="res_irr" class="hidden" style="margin-top:10px;">
                <span style="font-weight:bold; color:#8e44ad; font-size:1.2rem;" id="irr_final">0 Bigha</span>
            </div>
        </div>

        <div class="card">
            <h3>üí∞ ‡§≠‡§æ‡§µ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞</h3>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                <input type="number" id="price_area" placeholder="‡§ú‡§Æ‡•Ä‡§® (‡§¨‡•Ä‡§ò‡§æ)">
                <input type="number" id="price_rate" placeholder="‡§≠‡§æ‡§µ (‡§∞‡•Å)">
            </div>
            <button class="btn-action" style="background:#27ae60;" onclick="calcPrice()">‡§ï‡•Ä‡§Æ‡§§ ‡§ú‡§æ‡§®‡•á‡§Ç</button>
             <div id="res_price" style="margin-top:15px; font-weight:bold; color:#27ae60; font-size:1.2rem; text-align:center;">-</div>
        </div>
    </div>

    <div class="card">
        <h3 style="display:flex; justify-content:space-between;">üíæ ‡§¨‡§π‡•Ä-‡§ñ‡§æ‡§§‡§æ (History) <button onclick="clearHistory()" style="font-size:0.8rem; background:red; color:white; border:none; padding:5px 10px; border-radius:4px;">‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç</button></h3>
        <ul id="historyList" class="history-list"></ul>
    </div>

</div>

<script>
    // --- Constants ---
    const SQFT_BIGHA = 17424;
    const SQFT_BISWA = 871.2;
    const SQFT_HECTARE = 107555.555;
    const FT_JARIB = 66; const FT_GATH = 16.5; const FT_ANGUR = 4.125;

    let currentMode = 'simple';

    // --- Settings ---
    function getGajSqFt() { return Math.pow(parseFloat(document.getElementById('gajSize').value) || 2, 2); }
    function updateSettings() {
        let size = parseFloat(document.getElementById('gajSize').value) || 0;
        document.getElementById('gajSizeDisp').value = size;
        document.getElementById('currentSqFt').innerText = size*size;
        if(document.getElementById('convVal').value) convertLand();
    }

    // --- 1. Math Calculator ---
    let screen = document.getElementById('calcScreen');
    function calcAppend(v) { screen.value += v; }
    function calcClear() { screen.value = ""; }
    function calcBackspace() { screen.value = screen.value.slice(0, -1); }
    function calcEqual() { try { screen.value = new Function('return ' + screen.value)(); } catch { screen.value = "Error"; } }

    // --- 2. Converter ---
    function convertLand() {
        let val = parseFloat(document.getElementById('convVal').value);
        let unit = document.getElementById('convUnit').value;
        if(isNaN(val)) return;
        
        let sqft = 0;
        if(unit==='bigha') sqft=val*SQFT_BIGHA;
        else if(unit==='hectare') sqft=val*SQFT_HECTARE;
        else if(unit==='biswa') sqft=val*SQFT_BISWA;
        else if(unit==='gaj') sqft=val*getGajSqFt();
        else sqft=val;

        displayResults('c_', sqft);
    }

    // --- 3. Area Calculator ---
    function setMode(mode) {
        currentMode = mode;
        document.getElementById('modeSimple').classList.toggle('hidden', mode!=='simple');
        document.getElementById('modeJarib').classList.toggle('hidden', mode!=='jarib');
        document.getElementById('btnModeSimple').className = mode==='simple' ? 'toggle-btn active' : 'toggle-btn';
        document.getElementById('btnModeJarib').className = mode==='jarib' ? 'toggle-btn active' : 'toggle-btn';
        document.getElementById('areaResult').classList.add('hidden');
    }

    function calculateArea() {
        let sqft = 0;
        if(currentMode === 'simple') {
            let l = parseFloat(document.getElementById('s_len').value)||0;
            let w = parseFloat(document.getElementById('s_wid').value)||0;
            let u = document.getElementById('s_unit').value;
            if(u==='ft') sqft = l*w;
            else if(u==='mtr') sqft=(l*3.28)*(w*3.28);
            else { let g=Math.sqrt(getGajSqFt()); sqft=(l*g)*(w*g); }
        } else {
            let lj=parseFloat(document.getElementById('l_j').value)||0;
            let lg=parseFloat(document.getElementById('l_g').value)||0;
            let la=parseFloat(document.getElementById('l_a').value)||0;
            let wj=parseFloat(document.getElementById('w_j').value)||0;
            let wg=parseFloat(document.getElementById('w_g').value)||0;
            let wa=parseFloat(document.getElementById('w_a').value)||0;
            let lf = (lj*FT_JARIB)+(lg*FT_GATH)+(la*FT_ANGUR);
            let wf = (wj*FT_JARIB)+(wg*FT_GATH)+(wa*FT_ANGUR);
            sqft = lf*wf;
        }
        document.getElementById('areaResult').classList.remove('hidden');
        displayResults('res_', sqft);
    }

    function displayResults(prefix, sqft) {
        document.getElementById(prefix+'sqft').innerText = sqft.toFixed(2);
        document.getElementById(prefix+'bigha').innerText = (sqft/SQFT_BIGHA).toFixed(4);
        document.getElementById(prefix+'biswa').innerText = (sqft/SQFT_BISWA).toFixed(2);
        document.getElementById(prefix+'hec').innerText = (sqft/SQFT_HECTARE).toFixed(5);
        document.getElementById(prefix+'gaj').innerText = (sqft/getGajSqFt()).toFixed(2);
    }

    // --- 4. Extra Features ---
    function calcIrregular() {
        let e=parseFloat(document.getElementById('irr_e').value)||0;
        let w=parseFloat(document.getElementById('irr_w').value)||0;
        let n=parseFloat(document.getElementById('irr_n').value)||0;
        let s=parseFloat(document.getElementById('irr_s').value)||0;
        let area = ((e+w)/2) * ((n+s)/2);
        document.getElementById('res_irr').classList.remove('hidden');
        document.getElementById('irr_final').innerText = (area/SQFT_BIGHA).toFixed(4) + " Bigha";
    }

    function calcPrice() {
        let a = parseFloat(document.getElementById('price_area').value)||0;
        let r = parseFloat(document.getElementById('price_rate').value)||0;
        document.getElementById('res_price').innerText = "‚Çπ " + (a*r).toLocaleString('en-IN');
    }

    // --- History ---
    function saveHistory() {
        let val = document.getElementById('res_bigha').innerText;
        let list = document.getElementById('historyList');
        let li = document.createElement('li');
        li.className = 'history-item';
        li.innerHTML = `<span>Area Calc</span> <b>${val} Bigha</b>`;
        list.prepend(li);
        
        // LocalStorage Logic
        let old = localStorage.getItem('gajsa_hist') || "";
        localStorage.setItem('gajsa_hist', li.innerHTML + "||" + old);
    }
    
    function loadHistory() {
        let old = localStorage.getItem('gajsa_hist');
        if(old) {
            old.split("||").forEach(h => {
                if(h) {
                    let li = document.createElement('li');
                    li.className = 'history-item';
                    li.innerHTML = h;
                    document.getElementById('historyList').appendChild(li);
                }
            });
        }
    }
    function clearHistory() {
        localStorage.removeItem('gajsa_hist');
        document.getElementById('historyList').innerHTML = "";
    }

    loadHistory();

</script>

</body>
</html>
