<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gajsa Pro Land Manager</title>
    <style>
        :root {
            --primary: #2c3e50; /* Dark Blue */
            --accent: #d35400; /* Marwari Orange */
            --light: #ecf0f1;
            --success: #27ae60;
            --card-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            margin: 0; padding: 0; color: #333;
        }

        /* --- Layout --- */
        .app-container {
            display: flex; min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 250px; background-color: var(--primary); color: white;
            padding: 20px; display: flex; flex-direction: column;
            position: fixed; height: 100%; overflow-y: auto;
        }
        .sidebar h2 { margin-top: 0; font-size: 1.4rem; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 15px; }
        .nav-btn {
            background: none; border: none; color: #bdc3c7; text-align: left;
            padding: 12px; cursor: pointer; font-size: 1rem; margin-bottom: 5px; border-radius: 6px;
            transition: 0.3s; width: 100%; display: flex; align-items: center; gap: 10px;
        }
        .nav-btn:hover, .nav-btn.active { background-color: rgba(255,255,255,0.1); color: white; font-weight: bold; }
        .nav-btn i { width: 20px; }

        /* Main Content */
        .main-content {
            flex: 1; margin-left: 250px; padding: 25px;
        }

        /* Top Bar */
        .top-bar {
            background: white; padding: 15px 25px; border-radius: 12px;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: var(--card-shadow); margin-bottom: 25px;
        }
        .settings-group { display: flex; align-items: center; gap: 10px; }
        .settings-group input { width: 60px; padding: 5px; text-align: center; font-weight: bold; border: 1px solid #ddd; border-radius: 4px; }

        /* Sections */
        .section { display: none; animation: fadeIn 0.4s; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Cards */
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: var(--card-shadow); margin-bottom: 20px; border-top: 4px solid var(--accent); }
        .card h3 { margin-top: 0; color: var(--primary); border-bottom: 1px dashed #eee; padding-bottom: 10px; }
        
        /* Grid */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }

        /* Inputs */
        label { display: block; font-weight: 600; font-size: 0.9rem; margin-bottom: 5px; color: #555; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 1rem; }
        input:focus { outline: none; border-color: var(--accent); }

        /* Buttons */
        .btn { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; margin-top: 15px; transition: 0.3s; }
        .btn:hover { background: #1a252f; }
        .btn-outline { background: transparent; border: 2px solid var(--accent); color: var(--accent); }
        .btn-outline:hover { background: var(--accent); color: white; }
        .btn-print { background: #7f8c8d; width: auto; padding: 8px 15px; float: right; }

        /* Result Tables */
        .res-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .res-table th { text-align: left; color: #777; font-size: 0.9rem; padding: 8px; border-bottom: 1px solid #eee; }
        .res-table td { text-align: right; font-weight: bold; color: var(--primary); padding: 8px; border-bottom: 1px solid #eee; }
        .res-highlight { color: var(--accent) !important; font-size: 1.2rem; }

        /* History Log */
        .history-list { list-style: none; padding: 0; }
        .history-item { background: #fff; padding: 15px; border-radius: 8px; border-left: 5px solid var(--success); margin-bottom: 10px; position: relative; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .h-title { font-weight: bold; display: block; }
        .h-detail { font-size: 0.9rem; color: #666; }
        .h-res { font-weight: bold; color: var(--accent); margin-top: 5px; display: block; }
        .h-date { font-size: 0.75rem; color: #999; position: absolute; top: 10px; right: 10px; }
        .btn-del { position: absolute; bottom: 10px; right: 10px; background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8rem; }

        /* Responsive */
        @media (max-width: 768px) {
            .app-container { flex-direction: column; }
            .sidebar { width: 100%; height: auto; position: relative; padding: 10px; overflow-x: auto; flex-direction: row; gap: 10px; }
            .sidebar h2 { display: none; }
            .nav-btn { width: auto; white-space: nowrap; padding: 8px 15px; background: rgba(255,255,255,0.1); }
            .main-content { margin-left: 0; padding: 15px; }
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }

        /* Print Mode */
        @media print {
            .sidebar, .btn, .no-print { display: none !important; }
            .main-content { margin: 0; padding: 0; }
            .card { box-shadow: none; border: 1px solid #ccc; break-inside: avoid; }
            body { background: white; }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="sidebar">
        <h2>Gajsa Pro üìê</h2>
        <button class="nav-btn active" onclick="showSection('dashboard')">üìä ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° (Home)</button>
        <button class="nav-btn" onclick="showSection('irregular')">üöú ‡§Ü‡§°‡§æ-‡§ü‡•á‡•ù‡§æ ‡§ñ‡•á‡§§</button>
        <button class="nav-btn" onclick="showSection('shapes')">üìê ‡§§‡§ø‡§ï‡•ã‡§®‡§æ / ‡§ó‡•ã‡§≤</button>
        <button class="nav-btn" onclick="showSection('money')">üí∞ ‡§≠‡§æ‡§µ ‡§î‡§∞ ‡§¨‡§Ç‡§ü‡§µ‡§æ‡§∞‡§æ</button>
        <button class="nav-btn" onclick="showSection('soil')">üöö ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä / ‡§ó‡§°‡•ç‡§¢‡§æ</button>
        <button class="nav-btn" onclick="showSection('history')">üíæ ‡§¨‡§π‡•Ä-‡§ñ‡§æ‡§§‡§æ (History)</button>
    </div>

    <div class="main-content">
        
        <div class="top-bar no-print">
            <div>
                <h3 style="margin:0;">‡§≠‡•Ç‡§Æ‡§ø ‡§Æ‡§æ‡§™‡§® ‡§Ø‡§Ç‡§§‡•ç‡§∞</h3>
                <small>1 ‡§¨‡•Ä‡§ò‡§æ = 17,424 Sq Ft</small>
            </div>
            <div class="settings-group">
                <span>üõ†Ô∏è ‡§ó‡§ú ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó:</span>
                <input type="number" id="gajSize" value="2" oninput="updateGlobals()">
                <span>x</span>
                <input type="number" id="gajSizeDisp" value="2" disabled style="background:#f9f9f9;">
                <small>(=<span id="globalSqFt">4</span> sqft)</small>
            </div>
        </div>

        <div id="dashboard" class="section active">
            <div class="grid-2">
                <div class="card">
                    <h3>üìè ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§®‡§æ‡§™ (Rectangular)</h3>
                    <div class="grid-2">
                        <div><label>‡§≤‡§Ç‡§¨‡§æ‡§à</label><input type="number" id="std_l"></div>
                        <div><label>‡§ö‡•å‡§°‡§º‡§æ‡§à</label><input type="number" id="std_w"></div>
                    </div>
                    <label>‡§Ø‡•Ç‡§®‡§ø‡§ü</label>
                    <select id="std_unit">
                        <option value="ft">‡§´‡•Å‡§ü (Feet)</option>
                        <option value="gaj">‡§ó‡§ú (Gaj - Local)</option>
                        <option value="mtr">‡§Æ‡•Ä‡§ü‡§∞ (Meter)</option>
                    </select>
                    <button class="btn" onclick="calcStandard()">‡§π‡§ø‡§∏‡§æ‡§¨ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>
                    <div id="res_std" style="display:none; margin-top:15px;">
                        <table class="res-table">
                            <tr><th>‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ (SqFt)</th><td id="rs_sqft">0</td></tr>
                            <tr><th>‡§¨‡•Ä‡§ò‡§æ</th><td class="res-highlight" id="rs_bigha">0</td></tr>
                            <tr><th>‡§¨‡§ø‡§∏‡•ç‡§µ‡§æ</th><td id="rs_biswa">0</td></tr>
                        </table>
                        <button class="btn btn-outline" style="margin-top:10px; font-size:0.8rem;" onclick="saveToHistory('‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§ñ‡•á‡§§', 'Simple Rectangular', document.getElementById('rs_bigha').innerText + ' Bigha')">üíæ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                </div>

                <div class="card" style="border-top-color: #27ae60;">
                    <h3>üìê ‡§ú‡§æ‡§∞‡•Ä‡§¨ (Jarib) <span style="font-size:0.7rem; float:right;">(66ft / 16.5ft)</span></h3>
                    <label>‡§≤‡§Ç‡§¨‡§æ‡§à (L)</label>
                    <div class="grid-3">
                        <input type="number" id="j_l_j" placeholder="‡§ú‡§æ‡§∞‡•Ä‡§¨">
                        <input type="number" id="j_l_g" placeholder="‡§ó‡§æ‡§Å‡§†">
                        <input type="number" id="j_l_a" placeholder="‡§Ö‡§Ç‡§ó‡•Ç‡§∞">
                    </div>
                    <label style="margin-top:10px;">‡§ö‡•å‡§°‡§º‡§æ‡§à (W)</label>
                    <div class="grid-3">
                        <input type="number" id="j_w_j" placeholder="‡§ú‡§æ‡§∞‡•Ä‡§¨">
                        <input type="number" id="j_w_g" placeholder="‡§ó‡§æ‡§Å‡§†">
                        <input type="number" id="j_w_a" placeholder="‡§Ö‡§Ç‡§ó‡•Ç‡§∞">
                    </div>
                    <button class="btn" onclick="calcJarib()">‡§ú‡§æ‡§∞‡•Ä‡§¨ ‡§ï‡§æ ‡§π‡§ø‡§∏‡§æ‡§¨ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>
                    <div id="res_jarib" style="display:none; margin-top:15px;">
                        <table class="res-table">
                            <tr><th>‡§ï‡•Å‡§≤ ‡§¨‡•Ä‡§ò‡§æ</th><td class="res-highlight" id="rj_bigha">0</td></tr>
                            <tr><th>‡§ï‡•Å‡§≤ ‡§¨‡§ø‡§∏‡•ç‡§µ‡§æ</th><td id="rj_biswa">0</td></tr>
                        </table>
                        <button class="btn btn-outline" style="margin-top:10px; font-size:0.8rem;" onclick="saveToHistory('‡§ú‡§æ‡§∞‡•Ä‡§¨ ‡§®‡§æ‡§™', 'Jarib Measurement', document.getElementById('rj_bigha').innerText + ' Bigha')">üíæ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3>üîÑ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü‡§∞ (‡§á‡§Ç‡§ö ‡§π‡•á‡§≤‡•ç‡§™‡§∞ ‡§∂‡§æ‡§Æ‡§ø‡§≤)</h3>
                <div class="grid-2">
                    <div>
                        <label>‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§°‡§æ‡§≤‡•á‡§Ç</label>
                        <input type="number" id="convVal" placeholder="0" oninput="convert()">
                    </div>
                    <div>
                        <label>‡§Ø‡•Ç‡§®‡§ø‡§ü ‡§ö‡•Å‡§®‡•á‡§Ç</label>
                        <select id="convUnit" onchange="convert()">
                            <option value="bigha">‡§¨‡•Ä‡§ò‡§æ</option>
                            <option value="gaj">‡§ó‡§ú</option>
                            <option value="sqft">Sq Ft</option>
                            <option value="inch">‡§á‡§Ç‡§ö (Inches) ‚ûî ‡§´‡•Å‡§ü</option>
                        </select>
                    </div>
                </div>
                <p id="convResult" style="font-weight:bold; color:var(--accent); text-align:center; font-size:1.2rem; margin-top:15px;">-</p>
                <small style="text-align:center; display:block; color:#777;">(‡§á‡§Ç‡§ö ‡§ö‡•Å‡§®‡§®‡•á ‡§™‡§∞ ‡§Ø‡§π ‡§Ü‡§™‡§ï‡•ã ‡§´‡•Å‡§ü ‡§Æ‡•á‡§Ç ‡§¨‡§§‡§æ ‡§¶‡•á‡§ó‡§æ: 12 ‡§á‡§Ç‡§ö = 1 ‡§´‡•Å‡§ü)</small>
            </div>
        </div>

        <div id="irregular" class="section">
            <div class="card">
                <h3>üöú ‡§Ü‡§°‡§æ-‡§ü‡•á‡•ù‡§æ ‡§ñ‡•á‡§§ (‡§î‡§∏‡§§ ‡§µ‡§ø‡§ß‡§ø)</h3>
                <p style="font-size:0.9rem; color:#666;">‡§ú‡§¨ ‡§Ü‡§Æ‡§®‡•á-‡§∏‡§æ‡§Æ‡§®‡•á ‡§ï‡•Ä ‡§≠‡•Å‡§ú‡§æ‡§è‡§Ç ‡§¨‡§∞‡§æ‡§¨‡§∞ ‡§® ‡§π‡•ã‡§Ç‡•§</p>
                
                <div class="grid-2">
                    <div><label>‡§™‡•Ç‡§∞‡•ç‡§µ (East) ‡§≠‡•Å‡§ú‡§æ</label><input type="number" id="irr_e"></div>
                    <div><label>‡§™‡§∂‡•ç‡§ö‡§ø‡§Æ (West) ‡§≠‡•Å‡§ú‡§æ</label><input type="number" id="irr_w"></div>
                    <div><label>‡§â‡§§‡•ç‡§§‡§∞ (North) ‡§≠‡•Å‡§ú‡§æ</label><input type="number" id="irr_n"></div>
                    <div><label>‡§¶‡§ï‡•ç‡§∑‡§ø‡§£ (South) ‡§≠‡•Å‡§ú‡§æ</label><input type="number" id="irr_s"></div>
                </div>
                
                <button class="btn" onclick="calcIrregular()">‡§î‡§∏‡§§ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>
                
                <div id="res_irr" style="display:none; margin-top:20px; background:#f9f9f9; padding:15px; border-radius:8px;">
                    <table class="res-table">
                        <tr><th>‡§î‡§∏‡§§ ‡§≤‡§Ç‡§¨‡§æ‡§à</th><td id="ri_len">0</td></tr>
                        <tr><th>‡§î‡§∏‡§§ ‡§ö‡•å‡§°‡§º‡§æ‡§à</th><td id="ri_wid">0</td></tr>
                        <tr><th>‡§ï‡•Å‡§≤ ‡§¨‡•Ä‡§ò‡§æ</th><td class="res-highlight" id="ri_bigha">0</td></tr>
                        <tr><th>‡§ï‡•Å‡§≤ ‡§¨‡§ø‡§∏‡•ç‡§µ‡§æ</th><td id="ri_biswa">0</td></tr>
                    </table>
                     <button class="btn btn-outline" style="margin-top:10px;" onclick="saveToHistory('‡§Ü‡§°‡§æ-‡§ü‡•á‡•ù‡§æ ‡§ñ‡•á‡§§', 'Average Method', document.getElementById('ri_bigha').innerText + ' Bigha')">üíæ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
                </div>
            </div>
        </div>

        <div id="shapes" class="section">
            <div class="grid-2">
                <div class="card">
                    <h3>üìê ‡§§‡§ø‡§ï‡•ã‡§®‡§æ ‡§ñ‡•á‡§§ (Triangle)</h3>
                    <p style="font-size:0.8rem;">‡§§‡•Ä‡§®‡•ã‡§Ç ‡§≠‡•Å‡§ú‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§®‡§æ‡§™ ‡§°‡§æ‡§≤‡•á‡§Ç (Heron's Formula)</p>
                    <input type="number" id="tri_a" placeholder="‡§≠‡•Å‡§ú‡§æ A (ft)" style="margin-bottom:10px;">
                    <input type="number" id="tri_b" placeholder="‡§≠‡•Å‡§ú‡§æ B (ft)" style="margin-bottom:10px;">
                    <input type="number" id="tri_c" placeholder="‡§≠‡•Å‡§ú‡§æ C (ft)">
                    <button class="btn" onclick="calcTriangle()">‡§π‡§ø‡§∏‡§æ‡§¨ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>
                    <div id="res_tri" style="margin-top:10px; font-weight:bold; color:var(--accent);"></div>
                </div>

                <div class="card">
                    <h3>‚≠ï ‡§ó‡•ã‡§≤ ‡§ï‡•Å‡§Ç‡§° / ‡§ï‡•Å‡§Ü‡§Ç (Circle)</h3>
                    <label>‡§µ‡•ç‡§Ø‡§æ‡§∏ (Diameter/‡§ö‡•å‡§°‡§º‡§æ‡§à) ‡§´‡•Å‡§ü ‡§Æ‡•á‡§Ç:</label>
                    <input type="number" id="circ_d">
                    <button class="btn" onclick="calcCircle()">‡§π‡§ø‡§∏‡§æ‡§¨ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>
                    <div id="res_circ" style="margin-top:10px; font-weight:bold; color:var(--accent);"></div>
                </div>
            </div>
        </div>

        <div id="money" class="section">
            <div class="card">
                <h3>üí∞ ‡§ï‡•Ä‡§Æ‡§§ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞</h3>
                <div class="grid-2">
                    <div><label>‡§ï‡•Å‡§≤ ‡§ú‡§Æ‡•Ä‡§® (‡§¨‡•Ä‡§ò‡§æ ‡§Æ‡•á‡§Ç)</label><input type="number" id="cost_area"></div>
                    <div><label>‡§≠‡§æ‡§µ (Rate) ‡§™‡•ç‡§∞‡§§‡§ø ‡§¨‡•Ä‡§ò‡§æ</label><input type="number" id="cost_rate"></div>
                </div>
                <button class="btn" onclick="calcCost()">‡§ï‡•Å‡§≤ ‡§ï‡•Ä‡§Æ‡§§ ‡§ú‡§æ‡§®‡•á‡§Ç</button>
                <h2 id="res_cost" style="text-align:center; color:var(--success); margin-top:15px;">‚Çπ 0</h2>
            </div>

            <div class="card">
                <h3>üë®‚Äçüë©‚Äçüë¶‚Äçüë¶ ‡§¨‡§Ç‡§ü‡§µ‡§æ‡§∞‡§æ (Partition)</h3>
                <div class="grid-2">
                    <div><label>‡§ï‡•Å‡§≤ ‡§ú‡§Æ‡•Ä‡§® (‡§¨‡•Ä‡§ò‡§æ)</label><input type="number" id="part_area"></div>
                    <div><label>‡§π‡§ø‡§∏‡§∏‡•á‡§¶‡§æ‡§∞ (‡§≠‡§æ‡§à/‡§≤‡•ã‡§ó)</label><input type="number" id="part_ppl"></div>
                </div>
                <button class="btn" onclick="calcPartition()">‡§π‡§ø‡§∏‡§æ‡§¨ ‡§ï‡§∞‡•á‡§Ç</button>
                <div id="res_part" style="margin-top:15px; font-weight:bold; text-align:center;"></div>
            </div>
        </div>

        <div id="soil" class="section">
            <div class="card">
                <h3>üöö ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§≠‡§∞‡§æ‡§à / ‡§ñ‡•Å‡§¶‡§æ‡§à (Volume)</h3>
                <p style="font-size:0.9rem;">(‡§Æ‡§æ‡§®‡§ï: 1 ‡§ü‡•ç‡§∞‡•â‡§≤‡•Ä ‚âà 100 ‡§ò‡§® ‡§´‡•Å‡§ü)</p>
                <div class="grid-3">
                    <div><label>‡§≤‡§Ç‡§¨‡§æ‡§à (ft)</label><input type="number" id="soil_l"></div>
                    <div><label>‡§ö‡•å‡§°‡§º‡§æ‡§à (ft)</label><input type="number" id="soil_w"></div>
                    <div><label>‡§ó‡§π‡§∞‡§æ‡§à (ft)</label><input type="number" id="soil_d"></div>
                </div>
                <button class="btn" onclick="calcSoil()">‡§ü‡•ç‡§∞‡•â‡§≤‡•Ä ‡§ï‡§æ ‡§π‡§ø‡§∏‡§æ‡§¨ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>
                <div id="res_soil" style="margin-top:20px;">
                    <table class="res-table">
                        <tr><th>‡§ï‡•Å‡§≤ ‡§ï‡§æ‡§Æ (Cubic Ft)</th><td id="rs_cft">0</td></tr>
                        <tr><th>‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§ü‡•ç‡§∞‡•â‡§≤‡•Ä</th><td class="res-highlight" id="rs_trolley">0</td></tr>
                    </table>
                </div>
            </div>
        </div>

        <div id="history" class="section">
            <div class="card">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                    <h3>üíæ ‡§¨‡§π‡•Ä-‡§ñ‡§æ‡§§‡§æ (Saved Records)</h3>
                    <button class="btn-print no-print" onclick="window.print()">üñ®Ô∏è ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
                </div>
                <ul id="historyList" class="history-list">
                    </ul>
                <p id="noHistory" style="text-align:center; color:#999;">‡§Ö‡§≠‡•Ä ‡§ï‡•ã‡§à ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§∏‡•á‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§</p>
                <button class="btn btn-outline no-print" onclick="clearHistory()" style="margin-top:20px; border-color:#e74c3c; color:#e74c3c;">‡§™‡•Ç‡§∞‡§æ ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§Æ‡§ø‡§ü‡§æ‡§è‡§Ç</button>
            </div>
        </div>

    </div>
</div>

<script>
    // --- Constants ---
    const SQFT_BIGHA = 17424;
    const SQFT_BISWA = 871.2;
    
    // Jarib
    const FT_JARIB = 66;
    const FT_GATH = 16.5;
    const FT_ANGUR = 4.125;

    // --- Navigation Logic ---
    function showSection(id) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    // --- Global Settings ---
    function getGajSqFt() { return Math.pow(parseFloat(document.getElementById('gajSize').value) || 2, 2); }
    function updateGlobals() {
        let size = parseFloat(document.getElementById('gajSize').value) || 2;
        document.getElementById('gajSizeDisp').value = size;
        document.getElementById('globalSqFt').innerText = size * size;
    }

    // --- 1. Standard Calc ---
    function calcStandard() {
        let l = parseFloat(document.getElementById('std_l').value) || 0;
        let w = parseFloat(document.getElementById('std_w').value) || 0;
        let unit = document.getElementById('std_unit').value;
        let areaSqFt = 0;

        if (unit === 'ft') areaSqFt = l * w;
        else if (unit === 'mtr') areaSqFt = (l * 3.28084) * (w * 3.28084);
        else if (unit === 'gaj') {
            let linearGaj = Math.sqrt(getGajSqFt());
            areaSqFt = (l * linearGaj) * (w * linearGaj);
        }

        document.getElementById('res_std').style.display = 'block';
        document.getElementById('rs_sqft').innerText = areaSqFt.toFixed(2);
        document.getElementById('rs_bigha').innerText = (areaSqFt / SQFT_BIGHA).toFixed(4);
        document.getElementById('rs_biswa').innerText = (areaSqFt / SQFT_BISWA).toFixed(2);
    }

    // --- 2. Jarib Calc ---
    function calcJarib() {
        let lenFt = (parseFloat(document.getElementById('j_l_j').value)||0)*FT_JARIB + 
                    (parseFloat(document.getElementById('j_l_g').value)||0)*FT_GATH + 
                    (parseFloat(document.getElementById('j_l_a').value)||0)*FT_ANGUR;
        
        let widFt = (parseFloat(document.getElementById('j_w_j').value)||0)*FT_JARIB + 
                    (parseFloat(document.getElementById('j_w_g').value)||0)*FT_GATH + 
                    (parseFloat(document.getElementById('j_w_a').value)||0)*FT_ANGUR;

        let area = lenFt * widFt;
        document.getElementById('res_jarib').style.display = 'block';
        document.getElementById('rj_bigha').innerText = (area / SQFT_BIGHA).toFixed(4);
        document.getElementById('rj_biswa').innerText = (area / SQFT_BISWA).toFixed(2);
    }

    // --- 3. Converter ---
    function convert() {
        let val = parseFloat(document.getElementById('convVal').value);
        let unit = document.getElementById('convUnit').value;
        let res = "";

        if(isNaN(val)) return;

        if(unit === 'inch') {
            res = (val / 12).toFixed(2) + " ‡§´‡•Å‡§ü";
        } else {
            let sqft = 0;
            if(unit === 'bigha') sqft = val * SQFT_BIGHA;
            else if(unit === 'gaj') sqft = val * getGajSqFt();
            else sqft = val;

            let bigha = (sqft / SQFT_BIGHA).toFixed(4);
            res = `${sqft.toFixed(2)} SqFt | ${bigha} ‡§¨‡•Ä‡§ò‡§æ`;
        }
        document.getElementById('convResult').innerText = res;
    }

    // --- 4. Irregular ---
    function calcIrregular() {
        let e = parseFloat(document.getElementById('irr_e').value) || 0;
        let w = parseFloat(document.getElementById('irr_w').value) || 0;
        let n = parseFloat(document.getElementById('irr_n').value) || 0;
        let s = parseFloat(document.getElementById('irr_s').value) || 0;

        let avgLen = (e + w) / 2;
        let avgWid = (n + s) / 2;
        let area = avgLen * avgWid;

        document.getElementById('res_irr').style.display = 'block';
        document.getElementById('ri_len').innerText = avgLen.toFixed(1) + " ft";
        document.getElementById('ri_wid').innerText = avgWid.toFixed(1) + " ft";
        document.getElementById('ri_bigha').innerText = (area / SQFT_BIGHA).toFixed(4);
        document.getElementById('ri_biswa').innerText = (area / SQFT_BISWA).toFixed(2);
    }

    // --- 5. Shapes ---
    function calcTriangle() {
        let a = parseFloat(document.getElementById('tri_a').value);
        let b = parseFloat(document.getElementById('tri_b').value);
        let c = parseFloat(document.getElementById('tri_c').value);

        if(!a || !b || !c) return;

        // Heron's Formula
        let s = (a + b + c) / 2;
        let area = Math.sqrt(s * (s - a) * (s - b) * (s - c));
        
        if(isNaN(area)) { document.getElementById('res_tri').innerText = "‡§Ö‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§≠‡•Å‡§ú‡§æ‡§è‡§Ç (Invalid Sides)"; return; }

        let bigha = (area / SQFT_BIGHA).toFixed(4);
        document.getElementById('res_tri').innerHTML = `‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤: ${area.toFixed(2)} SqFt <br> ‡§¨‡•Ä‡§ò‡§æ: ${bigha}`;
    }

    function calcCircle() {
        let d = parseFloat(document.getElementById('circ_d').value);
        if(!d) return;
        let r = d / 2;
        let area = Math.PI * r * r;
        document.getElementById('res_circ').innerHTML = `‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤: ${area.toFixed(2)} SqFt`;
    }

    // --- 6. Utilities ---
    function calcCost() {
        let area = parseFloat(document.getElementById('cost_area').value) || 0;
        let rate = parseFloat(document.getElementById('cost_rate').value) || 0;
        document.getElementById('res_cost').innerText = "‚Çπ " + (area * rate).toLocaleString('en-IN');
    }

    function calcPartition() {
        let area = parseFloat(document.getElementById('part_area').value) || 0;
        let ppl = parseFloat(document.getElementById('part_ppl').value) || 1;
        let share = area / ppl;
        document.getElementById('res_part').innerText = `‡§π‡§∞ ‡§è‡§ï ‡§ï‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ: ${share.toFixed(4)} ‡§¨‡•Ä‡§ò‡§æ`;
    }

    function calcSoil() {
        let l = parseFloat(document.getElementById('soil_l').value) || 0;
        let w = parseFloat(document.getElementById('soil_w').value) || 0;
        let d = parseFloat(document.getElementById('soil_d').value) || 0;
        
        let cft = l * w * d;
        let trolleys = cft / 100; // Approx 100 cft per trolley standard
        
        document.getElementById('rs_cft').innerText = cft.toFixed(2);
        document.getElementById('rs_trolley').innerText = Math.ceil(trolleys);
    }

    // --- HISTORY STORAGE LOGIC ---
    function saveToHistory(type, detail, result) {
        let history = JSON.parse(localStorage.getItem('gajsa_land_history')) || [];
        let now = new Date();
        let dateStr = now.toLocaleDateString('hi-IN') + ' ' + now.toLocaleTimeString('hi-IN');
        
        history.unshift({ type, detail, result, date: dateStr });
        if(history.length > 50) history.pop(); // Keep last 50 only

        localStorage.setItem('gajsa_land_history', JSON.stringify(history));
        loadHistory();
        alert('‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§Ø‡§æ!');
    }

    function loadHistory() {
        let history = JSON.parse(localStorage.getItem('gajsa_land_history')) || [];
        let list = document.getElementById('historyList');
        list.innerHTML = "";
        
        if(history.length === 0) {
            document.getElementById('noHistory').style.display = 'block';
            return;
        }
        document.getElementById('noHistory').style.display = 'none';

        history.forEach((item, index) => {
            let li = document.createElement('li');
            li.className = 'history-item';
            li.innerHTML = `
                <span class="h-date">${item.date}</span>
                <span class="h-title">${item.type}</span>
                <span class="h-detail">${item.detail}</span>
                <span class="h-res">${item.result}</span>
                <button class="btn-del no-print" onclick="deleteHistoryItem(${index})">Delete</button>
            `;
            list.appendChild(li);
        });
    }

    function deleteHistoryItem(index) {
        let history = JSON.parse(localStorage.getItem('gajsa_land_history'));
        history.splice(index, 1);
        localStorage.setItem('gajsa_land_history', JSON.stringify(history));
        loadHistory();
    }

    function clearHistory() {
        if(confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§™‡•Ç‡§∞‡§æ ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§Æ‡§ø‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?')) {
            localStorage.removeItem('gajsa_land_history');
            loadHistory();
        }
    }

    // Init
    loadHistory();

</script>

</body>
</html>