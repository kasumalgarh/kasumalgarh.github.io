<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="utf-8">
    <title>Page Creator - KASUMALGARH</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Lato&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* SHAHI THEME */
        :root { --bg-dark: #050510; --gold: #d4af37; --text: #e0e0e0; }
        body { background: var(--bg-dark); color: var(--text); font-family: 'Lato', sans-serif; text-align: center; margin: 0; padding: 20px; }
        
        .container { max-width: 800px; margin: 0 auto; background: rgba(255,255,255,0.05); padding: 30px; border: 1px solid var(--gold); border-radius: 10px; }
        
        h2 { font-family: 'Cinzel', serif; color: var(--gold); margin-bottom: 20px; }
        
        label { display: block; text-align: left; margin: 15px 0 5px; color: #aaa; }
        input, textarea { width: 100%; padding: 10px; background: #222; border: 1px solid #555; color: #fff; border-radius: 5px; box-sizing: border-box; }
        textarea { height: 150px; }
        
        .btn { 
            background: linear-gradient(45deg, #bf953f, #aa771c); color: #000; 
            padding: 12px 30px; border: none; font-weight: bold; margin-top: 20px; 
            cursor: pointer; width: 100%; font-family: 'Cinzel', serif; font-size: 1.1em;
        }
        .btn:hover { filter: brightness(1.1); }

        .preview-box { margin-top: 30px; border-top: 1px dashed #555; padding-top: 20px; text-align: left; font-size: 0.9em; color: #888; }
    </style>
</head>
<body>

    <div class="container">
        <h2><i class="fas fa-magic"></i> MAGIC PAGE CREATOR</h2>
        <p>Fill details to create a new page instantly.</p>

        <label>1. New File Name (e.g., events.html)</label>
        <input type="text" id="fileName" placeholder="page_name.html">

        <label>2. Page Title (Heading)</label>
        <input type="text" id="pageTitle" placeholder="e.g., ROYAL EVENTS">

        <label>3. Page Content (Text or HTML)</label>
        <textarea id="pageContent" placeholder="Write your content here... You can use HTML tags like <p>, <h2>, <img> etc."></textarea>

        <button onclick="createPage()" class="btn"><i class="fas fa-upload"></i> CREATE & PUBLISH PAGE</button>
        
        <div id="status" style="margin-top:15px; font-weight:bold;"></div>
    </div>

    <textarea id="masterTemplate" style="display:none;">
<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[[TITLE]] - KASUMALGARH</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --royal-bg: #000033; --paper-bg: #fffbf0; --gold-gradient: linear-gradient(135deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c); --maroon-text: #800000; --dark-gold-line: #aa8c2c; }
        body { margin: 0; background-color: var(--royal-bg); color: #333; font-family: 'Playfair Display', serif; }
        body::before { content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: url('https://www.transparenttextures.com/patterns/black-scales.png'); filter: invert(1); opacity: 0.4; pointer-events: none; z-index: -1; }
        
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: #000033; border-bottom: 2px solid #b38728; position: sticky; top: 0; z-index: 2000; }
        .navbar-brand { font-family: 'Cinzel', serif; font-size: 1.5em; font-weight: 900; color: #fcf6ba; text-decoration: none; }
        .navbar-links { list-style: none; display: flex; gap: 15px; }
        .navbar-links a { color: #897148; text-decoration: none; font-family: 'Cinzel', serif; font-weight: 700; }
        
        .page-header { background: linear-gradient(rgba(0,0,51,0.7), rgba(0,0,51,0.9)), url('1.jpg'); background-size: cover; height: 300px; display: flex; justify-content: center; align-items: center; text-align: center; border-bottom: 4px solid #b38728; }
        .page-title { font-family: 'Cinzel', serif; font-size: 3em; color: #fcf6ba; text-transform: uppercase; text-shadow: 0 5px 10px rgba(0,0,0,0.8); }
        
        .main-content { padding: 40px 20px; min-height: 50vh; }
        .content-container { max-width: 900px; margin: 0 auto; background: var(--paper-bg); border: 2px solid #aa8c2c; padding: 30px; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.5); text-align: center; font-size: 1.1em; line-height: 1.6; }
        
        footer { text-align: center; color: #b38728; padding: 20px; background-color: #000022; border-top: 4px solid #897148; }
        @media (max-width: 600px) { .page-title { font-size: 2em; } .navbar-links { display: none; } }
    </style>
</head>
<body>
    <nav class="navbar">
        <a class="navbar-brand" href="index.html">KASUMALGARH</a>
        <ul class="navbar-links">
            <li><a href="index.html">HOME</a></li>
            <li><a href="vanshawali.html">VANSHAWALI</a></li>
            <li><a href="history.html">HISTORY</a></li>
            <li><a href="contact.html">CONTACT</a></li>
        </ul>
    </nav>

    <header class="page-header">
        <h1 class="page-title">[[TITLE]]</h1>
    </header>

    <main class="main-content">
        <div class="content-container">
            [[CONTENT]]
        </div>
    </main>

    <footer>
        &copy; 2025 Thikana Kasumalgarh
    </footer>
</body>
</html>
    </textarea>

    <script>
        // CONFIG
        const GITHUB_USERNAME = "kasumalgarh";
        const REPO_NAME = "kasumalgarh.github.io";
        const BRANCH = "main";

        async function createPage() {
            const fileName = document.getElementById('fileName').value.trim();
            const pageTitle = document.getElementById('pageTitle').value.trim();
            const pageContent = document.getElementById('pageContent').value.trim();
            const status = document.getElementById('status');

            if(!fileName || !pageTitle) { alert("Please fill File Name and Title!"); return; }
            if(!fileName.endsWith('.html')) { alert("File name must end with .html"); return; }

            const token = prompt("üîë GitHub Token Paste Karein:");
            if(!token) return;

            status.style.color = "yellow";
            status.innerHTML = "‚è≥ Creating Page...";

            // 1. Prepare Code
            let template = document.getElementById('masterTemplate').value;
            let finalCode = template.replace(/\[\[TITLE\]\]/g, pageTitle)
                                    .replace(/\[\[CONTENT\]\]/g, pageContent);

            try {
                // 2. Upload to GitHub
                const apiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/${fileName}`;
                
                const putRes = await fetch(apiUrl, {
                    method: "PUT",
                    headers: { "Authorization": `token ${token}`, "Content-Type": "application/json" },
                    body: JSON.stringify({
                        message: `Created ${fileName} via Admin Panel`,
                        content: btoa(unescape(encodeURIComponent(finalCode))),
                        branch: BRANCH
                    })
                });

                if (putRes.ok) {
                    status.style.color = "#4caf50";
                    status.innerHTML = `üéâ Success! Page Created: <a href="https://${GITHUB_USERNAME}.github.io/${REPO_NAME}/${fileName}" target="_blank" style="color:#fff;">Open Page</a>`;
                    alert("Page Created Successfully!");
                } else {
                    const err = await putRes.json();
                    throw new Error(err.message);
                }

            } catch (err) {
                status.style.color = "red";
                status.innerHTML = "Error: " + err.message;
            }
        }
    </script>

</body>
</html>
