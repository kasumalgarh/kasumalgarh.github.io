<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KASUMALGARH :: Vanshavali Editor (Live Preview Tool)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
        /* ========================================= */
        /* A. EDITOR TOOL FORM STYLING (Dark Theme) */
        /* ========================================= */
        body { 
            font-family: 'Playfair Display', serif; 
            background-color: #2c0001; /* ‡§ó‡§π‡§∞‡§æ ‡§∂‡§æ‡§π‡•Ä ‡§≤‡§æ‡§≤/‡§Æ‡§∞‡•Ç‡§® */
            color: #f4f4f4; 
            padding: 20px; 
        }
        .main-wrapper { display: flex; max-width: 1400px; margin: 0 auto; gap: 20px; }
        .editor-panel { flex: 1; min-width: 600px; background-color: rgba(0, 0, 0, 0.7); padding: 30px; border-radius: 10px; border: 3px solid #d4af37; box-shadow: 0 0 15px #d4af37; }
        .preview-panel { flex: 1; padding: 20px; background-color: #2c0001; border-radius: 10px; border: 3px solid #d4af37; overflow-y: scroll; max-height: 800px; } 

        h2 { 
            color: #d4af37; 
            font-family: 'Cinzel', serif; 
            border-bottom: 2px solid #d4af37; 
            padding-bottom: 10px; 
            margin-bottom: 20px; 
            text-align: center; 
        }
        
        /* Fort Logo Styling */
        .fort-heading img {
            height: 40px; 
            vertical-align: middle; 
            margin-right: 10px;
        }

        h3 { color: #f4f4f4; font-family: 'Cinzel', serif; font-size: 1.5em; text-align: left; }        
        input[type="text"], textarea { width: 100%; padding: 10px; margin-bottom: 15px; background-color: #1a1a1a; color: #d4af37; border: 2px solid red; border-radius: 5px; box-sizing: border-box; font-family: Consolas, monospace; }        
        textarea { min-height: 150px; }        
        label { display: block; text-align: left; margin-bottom: 5px; color: #f4f4f4; font-weight: bold; font-family: 'Playfair Display', serif; }        
        
        /* ‡§¨‡§ü‡§® ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ */
        button { 
            background-color: #008000; 
            color: white; 
            padding: 12px 25px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 1.2em; 
            font-weight: bold;
            transition: background-color 0.3s;
            margin-top: 15px; 
            display: inline-block;
        }
        button:hover { background-color: #006400; }
        .paste-button {
            background-color: #5D4037; /* Royal Brown/Bronze */
            margin-left: 10px;
        }
        .paste-button:hover {
            background-color: #4E342E; 
        }

        .section { margin-top: 20px; padding-top: 10px; border-top: 1px dashed #d4af37; }        
        .warning { color: yellow; font-weight: bold; margin-bottom: 15px; }

        /* VILASHAVALI PREVIEW STYLING (Unchanged) */        
        .preview-panel .tree { padding: 0; text-align: left; }        
        .preview-panel .tree ul { list-style: none; padding-left: 20px; margin: 0; border-left: 2px solid #a30000; }        
        .preview-panel .tree li { text-align: left; padding: 5px 0; margin: 5px 0; position: relative; }        
        .preview-panel .tree li a {            
            border: 3px solid #d4af37; padding: 5px 10px; text-decoration: none; color: #3e2723;            
            background: linear-gradient(to bottom, #fff8dc, #f0e68c); font-family: 'Cinzel', serif;            
            font-weight: 700; font-size: 0.9em; border-radius: 8px; display: inline-block;            
            box-shadow: 0 5px 10px rgba(0,0,0,0.5); max-width: 95%; white-space: normal; cursor: default;        
        }        
        .preview-panel .tree li a:hover {             
            background: #d4af37; color: #2c0001; border-color: #fff; transform: none; 
        }        
        .preview-panel .tree li a br + small, .preview-panel .tree li a small {            
            display: block; margin-top: 3px; font-family: 'Playfair Display', serif; font-size: 0.7em; color: #5d4037; font-weight: normal;        
        }
        
        /* FOOTER STYLING */
        footer {
            margin-top: 40px;
            padding: 20px;
            border-top: 2px solid #d4af37;
        }
        footer a {
            color: #d4af37;
            margin: 0 10px;
            font-size: 1em;
            text-decoration: none;
        }
        footer a:hover {
            color: #fff;
        }
    </style>
</head>

<body>
<div class="main-wrapper">    
    <div class="editor-panel">        
        
        <center>
            <h2 class="fort-heading">
                <img src="./output-onlinepngtools (2).png" alt="Fort Kasumbi Logo">
                Vansh Editor (Live Preview) 
            </h2>
        </center>
        
        <h3>‡§ö‡§∞‡§£ 1: ‡§Æ‡•å‡§ú‡•Ç‡§¶‡§æ ‡§ï‡•ã‡§° ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</h3>        
        <textarea id="inputHtml" placeholder="‡§™‡§π‡§≤‡•á ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä ‡§™‡•á‡§ú ‡§™‡§∞ '‡§ï‡•ã‡§° ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç' ‡§¶‡§¨‡§æ‡§è‡§Å, ‡§´‡§ø‡§∞ ‡§®‡•Ä‡§ö‡•á ‡§µ‡§æ‡§≤‡•á ‡§¨‡§ü‡§® ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§"></textarea>
        
        <button onclick="pasteFromClipboard()" class="paste-button">üìã ‡§ï‡•ç‡§≤‡§ø‡§™‡§¨‡•ã‡§∞‡•ç‡§° ‡§∏‡•á ‡§ï‡•ã‡§° ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
        <button onclick="loadPreview()">üîÑ ‡§™‡•ç‡§∞‡•Ä‡§µ‡•ç‡§Ø‡•Ç ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</button>
        
        <div class="section">            
            <h3>‡§ö‡§∞‡§£ 2: ‡§®‡§æ‡§Æ ‡§≠‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h3>            
            <label for="grandParentName">**‡§¶‡§æ‡§¶‡§æ (Grandparent) ‡§ï‡§æ ‡§®‡§æ‡§Æ:**</label>            
            <input type="text" id="grandParentName" placeholder="‡§â‡§¶‡§æ‡§π‡§∞‡§£: Th. Ridmal Singh (‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä)">
            
            <label for="parentName">**‡§™‡§ø‡§§‡§æ (Parent) ‡§ï‡§æ ‡§®‡§æ‡§Æ:**</label>            
            <input type="text" id="parentName" placeholder="‡§â‡§¶‡§æ‡§π‡§∞‡§£: Th. Bhairu Singh (‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä)">
            
            <hr style="border-color: #d4af37;">
            
            <label for="newName">**‡§®‡§Ø‡§æ ‡§®‡§æ‡§Æ (Child's Name):**</label>            
            <input type="text" id="newName" placeholder="‡§â‡§¶‡§æ‡§π‡§∞‡§£: Kr. Yuvraj Singh">
            
            <label for="newNote">‡§õ‡•ã‡§ü‡§æ ‡§®‡•ã‡§ü (Optional):</label>            
            <input type="text" id="newNote" placeholder="(Optional) - ‡§∂‡§æ‡§¶‡•Ä ‡§ï‡§æ ‡§®‡•ã‡§ü, ‡§Ü‡§¶‡§ø">
            
            <button onclick="addName()">‚ûï ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä ‡§Æ‡•á‡§Ç ‡§®‡§æ‡§Æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</button>        
        </div>
        
        <div class="section">            
            <h3>‡§ö‡§∞‡§£ 3: ‡§®‡§Ø‡§æ ‡§ï‡•ã‡§° ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç</h3>            
            <p>‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§è ‡§ó‡§è ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§∏‡•á ‡§ï‡•ã‡§° ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ GitHub ‡§™‡§∞ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§</p>            
            <textarea id="outputHtml" readonly placeholder="‡§Ö‡§™‡§°‡•á‡§ü‡•á‡§° HTML ‡§ï‡•ã‡§° ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ"></textarea>        
        </div>    
    </div>        
    
    <div class="preview-panel">        
        <h2>‡§≤‡§æ‡§á‡§µ ‡§™‡•ç‡§∞‡•Ä‡§µ‡•ç‡§Ø‡•Ç</h2>        
        <div id="livePreview" class="tree">            
            <p style="color:yellow;">‡§ï‡•ã‡§° ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ '‡§™‡•ç‡§∞‡•Ä‡§µ‡•ç‡§Ø‡•Ç ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç' ‡§¶‡§¨‡§æ‡§è‡§Å‡•§</p>        
        </div>    
    </div>
</div>

<footer>
    <center>
        <a href="https://kasumalgarh.github.io/index.html" target="_blank">üè† ‡§π‡•ã‡§Æ‡§™‡•á‡§ú ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Å</a> |
        <a href="./admin_dashboard.html" target="_blank">üìä ‡§è‡§°‡§Æ‡§ø‡§® ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°</a> |
        <a href="https://github.com/kasumalgarh/kasumalgarh.github.io/edit/main/k_vanshavali.html" target="_blank">‚úçÔ∏è GitHub ‡§™‡§∞ ‡§ï‡•ã‡§° ‡§¨‡§¶‡§≤‡•á‡§Ç</a>
    </center>
</footer>
<script>
// --- PASTE FUNCTION ---
async function pasteFromClipboard() {
    try {
        const text = await navigator.clipboard.readText();
        if (text && text.includes('KasumalgarhVanshavali')) {
            document.getElementById('inputHtml').value = text;
            loadPreview();
            alert("‚úÖ ‡§ï‡•ã‡§° ‡§ï‡•ç‡§≤‡§ø‡§™‡§¨‡•ã‡§∞‡•ç‡§° ‡§∏‡•á ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•á‡§∏‡•ç‡§ü ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à! ‡§Ö‡§¨ ‡§Ü‡§™ ‡§®‡§æ‡§Æ ‡§ú‡•ã‡§°‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§");
        } else {
            alert("‚ùå ‡§ï‡•ç‡§≤‡§ø‡§™‡§¨‡•ã‡§∞‡•ç‡§° ‡§Æ‡•á‡§Ç ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä ‡§ï‡§æ ‡§ï‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä ‡§™‡•á‡§ú ‡§™‡§∞ ‡§ú‡§æ‡§ï‡§∞ '‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç' ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§è‡§Å‡•§");
        }
    } catch (err) {
        console.error('Failed to read clipboard contents: ', err);
        alert("‚ùå ‡§ï‡•ç‡§≤‡§ø‡§™‡§¨‡•ã‡§∞‡•ç‡§° ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§");
    }
}

// --- LOAD PREVIEW FUNCTION (Unchanged) ---
function loadPreview() {    
    const inputHtmlString = document.getElementById('inputHtml').value.trim();    
    const livePreviewDiv = document.getElementById('livePreview');        
    if (!inputHtmlString) {        
        livePreviewDiv.innerHTML = '<p style="color:red;">‡§™‡§π‡§≤‡•á ‡§ö‡§∞‡§£ 1 ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§° ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§</p>';        
        return;    
    }        
    if (inputHtmlString.includes('id="KasumalgarhVanshavali"')) {        
        livePreviewDiv.innerHTML = `<div id="previewWrapper" class="tree">${inputHtmlString}</div>`;    
    } else {         
        livePreviewDiv.innerHTML = `<p style="color:red;">‡§ï‡•ã‡§° ‡§∏‡§π‡•Ä ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ul id="KasumalgarhVanshavali" ‡§µ‡§æ‡§≤‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§π‡•Ä ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç‡•§</p>`;    
    }
}

// --- ADD NAME FUNCTION (Unchanged) ---
function addName() {    
    const inputHtmlString = document.getElementById('inputHtml').value.trim();    
    const grandParentName = document.getElementById('grandParentName').value.trim();    
    const parentName = document.getElementById('parentName').value.trim();    
    const newName = document.getElementById('newName').value.trim();    
    const newNote = document.getElementById('newNote').value.trim();    
    const outputHtml = document.getElementById('outputHtml');

    if (!inputHtmlString || !grandParentName || !parentName || !newName) {        
        alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç‡•§");        
        return;    
    }

    const tempContainer = document.createElement('div');    
    tempContainer.innerHTML = inputHtmlString;    
    const vanshavaliList = tempContainer.querySelector('#KasumalgarhVanshavali');

    if (!vanshavaliList) {        
        outputHtml.value = "‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ‡§á‡§®‡§™‡•Å‡§ü ‡§ï‡•ã‡§° ‡§Æ‡•á‡§Ç #KasumalgarhVanshavali ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä‡•§";        
        return;    
    }

    let parentElement = null;

    vanshavaliList.querySelectorAll('a').forEach(a => {        
        if (a.textContent.includes(parentName)) {            
            let currentElement = a.closest('li');            
            const parentUl = currentElement.closest('ul');                        
            if (parentUl) {                
                const grandParentElement = parentUl.closest('li');

                if (grandParentElement) {                    
                    const grandParentAnchor = grandParentElement.querySelector('a');                    
                    if (grandParentAnchor && grandParentAnchor.textContent.includes(grandParentName)) {                        
                        parentElement = currentElement;
                    }                
                }            
            }        
        }    
    });

    if (!parentElement) {        
        outputHtml.value = `‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä ‡§Æ‡•á‡§Ç "${parentName}" ‡§®‡§æ‡§Æ ‡§ï‡§æ ‡§ï‡•ã‡§à ‡§™‡§ø‡§§‡§æ "${grandParentName}" ‡§¶‡§æ‡§¶‡§æ ‡§ï‡•Ä ‡§∂‡§æ‡§ñ‡§æ ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§`;        
        alert(`‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä ‡§Æ‡•á‡§Ç "${parentName}" ‡§®‡§æ‡§Æ ‡§ï‡§æ ‡§ï‡•ã‡§à ‡§™‡§ø‡§§‡§æ "${grandParentName}" ‡§¶‡§æ‡§¶‡§æ ‡§ï‡•Ä ‡§∂‡§æ‡§ñ‡§æ ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§`);        
        return;    
    }        
    const newLi = document.createElement('li');    
    let anchorContent = `<a><strong>${newName}</strong>`;    
    if (newNote) {        
        anchorContent += `<br><small>${newNote}</small>`;    
    }    
    anchorContent += `</a>`;    
    newLi.innerHTML = anchorContent;

    let parentUl = parentElement.querySelector('ul');    
    if (!parentUl) {        
        parentUl = document.createElement('ul');        
        parentElement.appendChild(parentUl);    
    }    
    parentUl.appendChild(newLi);

    const updatedHtmlString = vanshavaliList.outerHTML;    
    outputHtml.value = updatedHtmlString;        
    
    document.getElementById('livePreview').innerHTML = `<div id="previewWrapper" class="tree">${updatedHtmlString}</div>`;    
    document.getElementById('inputHtml').value = updatedHtmlString;     
    alert(`‡§∏‡§´‡§≤‡§§‡§æ! ‡§®‡§Ø‡§æ ‡§®‡§æ‡§Æ "${newName}" ‡§∏‡§π‡•Ä ‡§∂‡§æ‡§ñ‡§æ ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à ‡§î‡§∞ ‡§™‡•ç‡§∞‡•Ä‡§µ‡•ç‡§Ø‡•Ç ‡§Ö‡§™‡§°‡•á‡§ü ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§`);
}

function initialLoad() {    
    document.getElementById('livePreview').innerHTML = '<p style="color:yellow;">‡§ü‡•Ç‡§≤ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞‡•§</p>';
}
window.onload = initialLoad;
</script>
</body>
</html>
