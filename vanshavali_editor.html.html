<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kasumalgarh Vanshavali Editor (Local Tool) - Updated</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f4; padding: 20px; }
        h2 { color: #2c0001; border-bottom: 2px solid #d4af37; padding-bottom: 5px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        textarea { width: 100%; min-height: 200px; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; font-family: Consolas, monospace; }
        input[type="text"] { width: 100%; padding: 10px; margin-bottom: 15px; box-sizing: border-box; border: 1px solid #ccc; }
        button { background-color: #d4af37; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; margin-top: 10px; }
        button:hover { background-color: #c49f27; }
        .warning { color: red; font-weight: bold; margin-bottom: 15px; }
        .section { margin-top: 30px; padding-top: 20px; border-top: 1px dashed #d4af37; }
    </style>
</head>
<body>

<div class="container">
    <center><h2>üëë Kasumalgarh Vanshavali Code Editor (PC Tool) üëë</h2></center>
    <p class="warning">
        ‚ö†Ô∏è **‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä ‡§∏‡•Ç‡§ö‡§®‡§æ:** ‡§Ö‡§¨ ‡§Ü‡§™‡§ï‡•ã **‡§¶‡§æ‡§¶‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ** ‡§≠‡§∞‡§®‡§æ ‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à ‡§§‡§æ‡§ï‡§ø ‡§ü‡•Ç‡§≤ ‡§∏‡§π‡•Ä ‡§∂‡§æ‡§ñ‡§æ ‡§ï‡•ã ‡§™‡§π‡§ö‡§æ‡§® ‡§∏‡§ï‡•á‡•§ ‡§ï‡•ã‡§° ‡§ï‡•ã ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§â‡§∏‡•á **‡§ñ‡•Å‡§¶** GitHub ‡§™‡§∞ ‡§ï‡•â‡§™‡•Ä-‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§
    </p>

    <h3>‡§ö‡§∞‡§£ 1: ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä ‡§ï‡§æ ‡§Æ‡•å‡§ú‡•Ç‡§¶‡§æ ‡§ï‡•ã‡§° ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç (GitHub ‡§∏‡•á ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç)</h3>
    <textarea id="inputHtml" placeholder="‡§Ø‡§π‡§æ‡§Å <ul id=&quot;KasumalgarhVanshavali&quot;> ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ </ul> ‡§§‡§ï ‡§ï‡§æ ‡§™‡•Ç‡§∞‡§æ HTML ‡§ï‡•ã‡§° ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§"></textarea>

    <div class="section">
        <h3>‡§ö‡§∞‡§£ 2: ‡§®‡§æ‡§Æ ‡§≠‡§∞‡•á‡§Ç (‡§∏‡§ü‡•Ä‡§ï ‡§∂‡§æ‡§ñ‡§æ ‡§ï‡•Ä ‡§™‡§π‡§ö‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è)</h3>
        
        <label for="grandParentName">**‡§¶‡§æ‡§¶‡§æ (Grandparent) ‡§ï‡§æ ‡§®‡§æ‡§Æ:**</label>
        <input type="text" id="grandParentName" placeholder="Th. Ridmal Singh (‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä)">

        <label for="parentName">**‡§™‡§ø‡§§‡§æ (Parent) ‡§ï‡§æ ‡§®‡§æ‡§Æ:**</label>
        <input type="text" id="parentName" placeholder="Th. Bhairu Singh (‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä)">

        <hr> <label for="newName">**‡§®‡§Ø‡§æ ‡§®‡§æ‡§Æ (Child's Name):**</label>
        <input type="text" id="newName" placeholder="Kr. Yuvraj Singh">

        <label for="newNote">‡§õ‡•ã‡§ü‡§æ ‡§®‡•ã‡§ü (Optional) (‡§â‡§¶‡§æ‡§π‡§∞‡§£: married at Sikar):</label>
        <input type="text" id="newNote" placeholder="(Optional) - ‡§∂‡§æ‡§¶‡•Ä ‡§ï‡§æ ‡§®‡•ã‡§ü, ‡§Ü‡§¶‡§ø">

        <button onclick="addName()">‚ûï ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä ‡§Æ‡•á‡§Ç ‡§®‡§æ‡§Æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</button>
    </div>

    <div class="section">
        <h3>‡§ö‡§∞‡§£ 3: ‡§®‡§Ø‡§æ ‡§ï‡•ã‡§° ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ GitHub ‡§™‡§∞ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</h3>
        <p>‡§Ø‡§π ‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§è ‡§ó‡§è ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§∞‡§æ ‡§Ö‡§™‡§°‡•á‡§ü‡•á‡§° ‡§ï‡•ã‡§° ‡§π‡•à‡•§ ‡§á‡§∏‡•á ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ GitHub ‡§™‡§∞ `k_vanshavali.html` ‡§´‡§æ‡§á‡§≤ ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§∞‡§æ‡§®‡•á ‡§ï‡•ã‡§° ‡§ï‡•Ä ‡§ú‡§ó‡§π ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞ ‡§¶‡•á‡§Ç‡•§</p>
        <textarea id="outputHtml" readonly placeholder="‡§Ö‡§™‡§°‡•á‡§ü‡•á‡§° HTML ‡§ï‡•ã‡§° ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ"></textarea>
    </div>
</div>

<script>
function addName() {
    const inputHtmlString = document.getElementById('inputHtml').value.trim();
    const grandParentName = document.getElementById('grandParentName').value.trim();
    const parentName = document.getElementById('parentName').value.trim();
    const newName = document.getElementById('newName').value.trim();
    const newNote = document.getElementById('newNote').value.trim();
    const outputHtml = document.getElementById('outputHtml');

    if (!inputHtmlString || !grandParentName || !parentName || !newName) {
        alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§ö‡§∞‡§£ 1 ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§° ‡§î‡§∞ ‡§ö‡§∞‡§£ 2 ‡§Æ‡•á‡§Ç ‡§¶‡§æ‡§¶‡§æ, ‡§™‡§ø‡§§‡§æ ‡§µ ‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§≠‡§∞‡•á‡§Ç‡•§");
        return;
    }

    // 1. Setup the temporary container
    const tempContainer = document.createElement('div');
    tempContainer.innerHTML = inputHtmlString;
    const vanshavaliList = tempContainer.querySelector('#KasumalgarhVanshavali');

    if (!vanshavaliList) {
        outputHtml.value = "‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ‡§á‡§®‡§™‡•Å‡§ü ‡§ï‡•ã‡§° ‡§Æ‡•á‡§Ç #KasumalgarhVanshavali ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§π‡•Ä ‡§ï‡•ã‡§° ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§";
        return;
    }

    // 2. Find the Parent (LI element) whose grandparent's text matches
    let parentElement = null;

    // Search all <a> elements (names) that match the parentName
    vanshavaliList.querySelectorAll('a').forEach(a => {
        if (a.textContent.includes(parentName)) {
            let currentElement = a.closest('li');
            
            // Now, check if this parent's grandparent matches the grandParentName
            // The grandparent should be the <li> element that contains the parent's entire branch (two levels up)
            // We use .closest('ul') to go to the parent list, and then .closest('li') to find the grandfather's LI
            
            // Go up to the parent's list (UL)
            const parentUl = currentElement.closest('ul');
            if (parentUl) {
                // The grandparent's LI element is the parent of the parent's UL
                const grandParentElement = parentUl.closest('li');

                if (grandParentElement) {
                    const grandParentAnchor = grandParentElement.querySelector('a');
                    if (grandParentAnchor && grandParentAnchor.textContent.includes(grandParentName)) {
                        // Found the correct branch!
                        parentElement = currentElement;
                    }
                }
            }
        }
    });


    if (!parentElement) {
        outputHtml.value = `‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä ‡§Æ‡•á‡§Ç "${parentName}" ‡§®‡§æ‡§Æ ‡§ï‡§æ ‡§ï‡•ã‡§à ‡§™‡§ø‡§§‡§æ "${grandParentName}" ‡§¶‡§æ‡§¶‡§æ ‡§ï‡•Ä ‡§∂‡§æ‡§ñ‡§æ ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§®‡§æ‡§Æ/‡§∏‡•ç‡§™‡•á‡§≤‡§ø‡§Ç‡§ó ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§`;
        return;
    }
    
    // 3. Creates the New Child LI element
    const newLi = document.createElement('li');
    let anchorContent = `<a>${newName}`;
    if (newNote) {
        anchorContent += `<br><small>${newNote}</small>`;
    }
    anchorContent += `</a>`;
    newLi.innerHTML = anchorContent;

    // 4. Inserts the New Child
    let parentUl = parentElement.querySelector('ul');
    
    // If the parent doesn't have a UL (no existing children), create one
    if (!parentUl) {
        parentUl = document.createElement('ul');
        parentElement.appendChild(parentUl);
    }
    
    // Append the new LI to the parent's UL
    parentUl.appendChild(newLi);

    // 5. Extracts the updated HTML
    outputHtml.value = vanshavaliList.outerHTML;

    alert(`‡§∏‡§´‡§≤‡§§‡§æ! ‡§®‡§Ø‡§æ ‡§®‡§æ‡§Æ "${newName}" ‡§∏‡§π‡•Ä ‡§∂‡§æ‡§ñ‡§æ ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‡§ö‡§∞‡§£ 3 ‡§∏‡•á ‡§ï‡•ã‡§° ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç‡•§`);
}
</script>

</body>
</html>